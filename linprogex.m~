% solves the linear programming problem
% min c_i * x_i where c_i is the cost of food i, x_i is fraction of 100 g food i
% subject to 600 <= 69x_1 + 18x_2 + 94x_3 >= 2000 ... etc

clear;

% objective function, minimizes total cost of food
food_list = ['Potatoes', 'Tomatoes', 'Corn', 'Onions', 'Lettuce', 'Cucumber', 'Peppers', 'Carrots', 'Cabbage', 'Broccoli', 'Oranges', 'Apples', 'Bananas', 'Watermelon', 'Grapes', 'Pineapple', 'Strawberries', 'Peaches', 'Grapefruit', 'Pinto Beans', 'Peas', 'Black Beans', 'Peanuts', 'Almonds', 'Pecans', 'Walnuts', 'Bread', 'Rice', 'Pasta', 'Quinoa', 'Chicken', 'Beef', 'Pork', 'Fish', 'Turkey', 'Lamb', 'Veal', 'Milk', 'Peanut butter', 'Butter'];
vegetarian_list = ['Potatoes', 'Tomatoes', 'Corn', 'Onions', 'Lettuce', 'Cucumber', 'Peppers', 'Carrots', 'Cabbage', 'Broccoli', 'Oranges', 'Apples', 'Bananas', 'Watermelon', 'Grapes', 'Pineapple', 'Strawberries', 'Peaches', 'Grapefruit', 'Pinto Beans', 'Peas', 'Black Beans', 'Peanuts', 'Almonds', 'Pecans', 'Walnuts', 'Bread', 'Rice', 'Pasta', 'Quinoa', 'Milk', 'Peanut butter', 'Butter'];
vegan_list = ['Potatoes', 'Tomatoes', 'Corn', 'Onions', 'Lettuce', 'Cucumber', 'Peppers', 'Carrots', 'Cabbage', 'Broccoli', 'Oranges', 'Apples', 'Bananas', 'Watermelon', 'Grapes', 'Pineapple', 'Strawberries', 'Peaches', 'Grapefruit', 'Pinto Beans', 'Peas', 'Black Beans', 'Peanuts', 'Almonds', 'Pecans', 'Walnuts', 'Bread', 'Rice', 'Pasta', 'Quinoa', 'Chicken', 'Beef', 'Pork', 'Fish', 'Turkey', 'Lamb', 'Veal', 'Milk', 'Peanut butter', 'Butter'];

%Prices 
f = [0.06393398, 0.330693, 0.2433906, 0.13007258, 0.13358, 0.498339, 0.983193, 0.1322772, 0.153882476,0.330031614,0.16093726, 0.3196699, 0.10141252, 0.198982, 0.551155, 0.330387, 0.7165015, 0.6062705, 0.220462, 0.110231, 0.264113476, 2.9947626, 0.2539728, 1.3615764, 1.53110859, 0.73413846, 0.440925, 0.1322772, 0.25132668, 0.633387326, 0.65918138, 0.98987438, 0.65918138, 1.98195338, 1.51898318, 1.54102938, 1.4991416, 0.042717, 0.3668496, 0.512133226];
f_vegetarian = [0.06393398, 0.330693, 0.2433906, 0.13007258, 0.13358, 0.498339, 0.983193, 0.1322772, 0.153882476,0.330031614,0.16093726, 0.3196699, 0.10141252, 0.198982, 0.551155, 0.330387, 0.7165015, 0.6062705, 0.220462, 0.110231, 0.264113476, 2.9947626, 0.2539728, 1.3615764, 1.53110859, 0.73413846, 0.440925, 0.1322772, 0.25132668, 0.633387326, 0.042717, 0.3668496, 0.512133226];
f_vegan = [0.06393398, 0.330693, 0.2433906, 0.13007258, 0.13358, 0.498339, 0.983193, 0.1322772, 0.153882476, 0.330031614, 0.16093726, 0.3196699, 0.10141252, 0.198982, 0.551155, 0.330387, 0.7165015, 0.6062705, 0.220462, 0.110231, 0.264113476, 2.9947626, 0.2539728, 1.3615764, 1.53110859, 0.73413846, 0.440925, 0.1322772, 0.25132668, 0.633387326, 0.3668496];

% Each row is a nutrient: ie all of the calories, each column a food
A = -[ 69 18 94 40 17 15 20 41 25 34 49 52 89 30 69 50 32 39 37 347 81 341 570 600 700 647 235 378 371 120 153 295 748 142 201 192 197 37 598 727;...
1.68 0.88 2.35 1.1 1.23 0.65 0.86 0.93 1.28 2.82 0.91 0.26 1.09 0.61 0.72 0.54 0.67 0.91 0.88 21.42 5.42 21.6 26.15 26.67 10 14.71 8.82 8.89 13.04 4.4 27.13 23.05 5.05 19.84 13.29 22.6 18.58 3.57 22.21 0.31;...
0.1 0.2 0 0.1 0.3 0.11 0.17 0.24 0.1 0.37 0.15 0.17 0.33 0.15 0.16 0.12 0.3 0.25 0.1 1.23 0.4 1.42 49.6 46.67 73.33 64.71 0 2.22 1.51 1.92 4.07 21.83 80.5 6.34 15.96 11.34 13.06 0.25 51.36 80.32;...
15.71 3.89 20 9.34 3.29 3.63 4.64 9.58 5.8 6.64 12.54 13.81 22.84 7.55 18.1 13.12 7.68 9.54 9.09 62.55 14.45 62.36 15.83 20 13.33 14.71 52.94 77.78 74.67 21.3 0 0 0 0 0 0 0 5.02 22.31 0.77;...
2.4 1.2 2.4 1.7 2.1 0.5 1.7 2.8 2.5 2.6 2.2 2.4 2.6 0.4 0.9 1.4 2 1.5 0.012 15.5 5.7 15.5 9.5 10 10 5.9 2.9 4.4 3.2 2.8 0 0 0 0 0 0 0 0 5 0;...
1.15 2.63 1.18 4.24 1.19 1.67 2.4 4.74 3.2 1.7 8.5 10.39 12.23 6.2 15.48 9.85 4.89 8.39 8.00E-05 2.11 5.67 2.12 0.106 3.33 3.33 2.94 2.94 0 2.67 0.87 0 0 0 0.012 0.145 0 0 5.02 10.49 0;...
0.009 0.01 0 0.023 0.033 0.016 0.01 0.033 0.04 0.047 0.043 0.006 0.005 0.007 0.01 0.013 0.016 0.006 0.143 0.113 0.025 0.123 0.00391 0.267 0.067 0.118 0 0 0.021 0.017 0.013 0.011 0.006 0.0008 0.00161 0.004 0.012 0.129 0.049 0.01;...
0.00052 0.00027 0.00042 0.00021 0.00097 0.00028 0.00034 0.0003 0.00047 0.00073 0.00013 0.00012 0.00026 0.00024 0.00036 0.00029 0.00041 0.00025 0 0.00507 0.00147 0.00502 0.744 0.0036 0.0024 0.00318 0 0 0.0033 0.00149 0.00108 0.00242 0.00044 0.49 0.173 0.00127 0.00137 5.00E-05 0.00174 4.00E-05;...
0.407 0.237 0.012 0.146 0.247 0.147 0.175 0.32 0.17 0.316 0.166 0.107 0.358 0.112 0.191 0.109 0.153 0.19 0.0333 1.393 0.244 1.483 0.022 0 0 0 0.588 0 0.223 0.172 0.236 0.305 0.066 0.044 0.048 0.162 0.198 0.171 0.558 0.022;...
0.016 0.005 0.0042 0.004 0.008 0.002 0.003 0.069 0.018 0.033 0.001 0.001 0.001 0.001 0.002 0.001 0.001 0 0 0.012 0.005 0.005 0 0 0 0 0 0 0.006 0.007 0.051 0.077 2.684 0 0 0.034 0.103 0.053 0.426 0.719;...
0.0091 0.0137 0 0.0074 0.004 0.0028 0.0804 0.0059 0.0366 0.0892 0.0591 0.0046 0.0087 0.0081 0.0032 0.0478 0.0588 0.0066 0 0.0063 0.04 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.001 0 0.0001;...
0 4.20E-08 0 0 4.36E-07 5.00E-09 1.80E-08 8.35E-07 5.00E-09 3.10E-08 1.20E-08 3.00E-09 3.00E-09 2.80E-08 3.00E-09 3.00E-09 1.00E-09 1.60E-08 0 0 3.80E-08 0 0 0 0 0 0 0 0 0 8.00E-09 0 0 0.000000012 9.50E-11 8.00E-09 0 6.40E-08 0 8.19E-07;...
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.075 0.084 0.086 0 0 0.071 0.049 0.002 0 0.012]; % nutrient constraints for each food

A_vegetarian = -[ 69 18 94 40 17 15 20 41 25 34 49 52 89 30 69 50 32 39 37 347 81 341 570 600 700 647 235 378 371 120 37 598 727;...
1.68 0.88 2.35 1.1 1.23 0.65 0.86 0.93 1.28 2.82 0.91 0.26 1.09 0.61 0.72 0.54 0.67 0.91 0.88 21.42 5.42 21.6 26.15 26.67 10 14.71 8.82 8.89 13.04 4.4 3.57 22.21 0.31;...
0.1 0.2 0 0.1 0.3 0.11 0.17 0.24 0.1 0.37 0.15 0.17 0.33 0.15 0.16 0.12 0.3 0.25 0.1 1.23 0.4 1.42 49.6 46.67 73.33 64.71 0 2.22 1.51 1.92 0.25 51.36 80.32;...
15.71 3.89 20 9.34 3.29 3.63 4.64 9.58 5.8 6.64 12.54 13.81 22.84 7.55 18.1 13.12 7.68 9.54 9.09 62.55 14.45 62.36 15.83 20 13.33 14.71 52.94 77.78 74.67 21.3 5.02 22.31 0.77;...
2.4 1.2 2.4 1.7 2.1 0.5 1.7 2.8 2.5 2.6 2.2 2.4 2.6 0.4 0.9 1.4 2 1.5 0.012 15.5 5.7 15.5 9.5 10 10 5.9 2.9 4.4 3.2 2.8 0 5 0;...
1.15 2.63 1.18 4.24 1.19 1.67 2.4 4.74 3.2 1.7 8.5 10.39 12.23 6.2 15.48 9.85 4.89 8.39 8.00E-05 2.11 5.67 2.12 0.106 3.33 3.33 2.94 2.94 0 2.67 0.87 5.02 10.49 0;...
0.009 0.01 0 0.023 0.033 0.016 0.01 0.033 0.04 0.047 0.043 0.006 0.005 0.007 0.01 0.013 0.016 0.006 0.143 0.113 0.025 0.123 0.00391 0.267 0.067 0.118 0 0 0.021 0.017 0.129 0.049 0.01;...
0.00052 0.00027 0.00042 0.00021 0.00097 0.00028 0.00034 0.0003 0.00047 0.00073 0.00013 0.00012 0.00026 0.00024 0.00036 0.00029 0.00041 0.00025 0 0.00507 0.00147 0.00502 0.744 0.0036 0.0024 0.00318 0 0 0.0033 0.00149 5.00E-05 0.00174 4.00E-05;...
0.407 0.237 0.012 0.146 0.247 0.147 0.175 0.32 0.17 0.316 0.166 0.107 0.358 0.112 0.191 0.109 0.153 0.19 0.0333 1.393 0.244 1.483 0.022 0 0 0 0.588 0 0.223 0.172 0.171 0.558 0.022;...
0.016 0.005 0.0042 0.004 0.008 0.002 0.003 0.069 0.018 0.033 0.001 0.001 0.001 0.001 0.002 0.001 0.001 0 0 0.012 0.005 0.005 0 0 0 0 0 0 0.006 0.007 0.053 0.426 0.719;...
0.0091 0.0137 0 0.0074 0.004 0.0028 0.0804 0.0059 0.0366 0.0892 0.0591 0.0046 0.0087 0.0081 0.0032 0.0478 0.0588 0.0066 0 0.0063 0.04 0 0 0 0 0 0 0 0 0 0.001 0 0.0001;...
0 4.20E-08 0 0 4.36E-07 5.00E-09 1.80E-08 8.35E-07 5.00E-09 3.10E-08 1.20E-08 3.00E-09 3.00E-09 2.80E-08 3.00E-09 3.00E-09 1.00E-09 1.60E-08 0 0 3.80E-08 0 0 0 0 0 0 0 0 0 6.40E-08 0 8.19E-07;...
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.002 0 0.012 ];

A_vegan = -[69 18 94 40 17 15 20 41 25 34 49 52 89 30 69 50 32 39 37 347 81 341 570 600 700 647 235 378 371 120 598;...
1.68 0.88 2.35 1.1 1.23 0.65 0.86 0.93 1.28 2.82 0.91 0.26 1.09 0.61 0.72 0.54 0.67 0.91 0.88 21.42 5.42 21.6 26.15 26.67 10 14.71 8.82 8.89 13.04 4.4 22.21;...
0.1 0.2 0 0.1 0.3 0.11 0.17 0.24 0.1 0.37 0.15 0.17 0.33 0.15 0.16 0.12 0.3 0.25 0.1 1.23 0.4 1.42 49.6 46.67 73.33 64.71 0 2.22 1.51 1.92 51.36;...
15.71 3.89 20 9.34 3.29 3.63 4.64 9.58 5.8 6.64 12.54 13.81 22.84 7.55 18.1 13.12 7.68 9.54 9.09 62.55 14.45 62.36 15.83 20 13.33 14.71 52.94 77.78 74.67 21.3 22.31;...
2.4 1.2 2.4 1.7 2.1 0.5 1.7 2.8 2.5 2.6 2.2 2.4 2.6 0.4 0.9 1.4 2 1.5 0.012 15.5 5.7 15.5 9.5 10 10 5.9 2.9 4.4 3.2 2.8 5;...
1.15 2.63 1.18 4.24 1.19 1.67 2.4 4.74 3.2 1.7 8.5 10.39 12.23 6.2 15.48 9.85 4.89 8.39 8.00E-05 2.11 5.67 2.12 0.106 3.33 3.33 2.94 2.94 0 2.67 0.87 10.49;...
0.009 0.01 0 0.023 0.033 0.016 0.01 0.033 0.04 0.047 0.043 0.006 0.005 0.007 0.01 0.013 0.016 0.006 0.143 0.113 0.025 0.123 0.00391 0.267 0.067 0.118 0 0 0.021 0.017 0.049;...
0.00052 0.00027 0.00042 0.00021 0.00097 0.00028 0.00034 0.0003 0.00047 0.00073 0.00013 0.00012 0.00026 0.00024 0.00036 0.00029 0.00041 0.00025 0 0.00507 0.00147 0.00502 0.744 0.0036 0.0024 0.00318 0 0 0.0033 0.00149 0.00174;...
0.407 0.237 0.012 0.146 0.247 0.147 0.175 0.32 0.17 0.316 0.166 0.107 0.358 0.112 0.191 0.109 0.153 0.19 0.0333 1.393 0.244 1.483 0.022 0 0 0 0.588 0 0.223 0.172 0.558;...
0.016 0.005 0.0042 0.004 0.008 0.002 0.003 0.069 0.018 0.033 0.001 0.001 0.001 0.001 0.002 0.001 0.001 0 0 0.012 0.005 0.005 0 0 0 0 0 0 0.006 0.007 0.426;...
0.0091 0.0137 0 0.0074 0.004 0.0028 0.0804 0.0059 0.0366 0.0892 0.0591 0.0046 0.0087 0.0081 0.0032 0.0478 0.0588 0.0066 0 0.0063 0.04 0 0 0 0 0 0 0 0 0 0;...
0 4.20E-08 0 0 4.36E-07 5.00E-09 1.80E-08 8.35E-07 5.00E-09 3.10E-08 1.20E-08 3.00E-09 3.00E-09 2.80E-08 3.00E-09 3.00E-09 1.00E-09 1.60E-08 0 0 3.80E-08 0 0 0 0 0 0 0 0 0 0;...
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0];

% Daily values for 13 nutrients (same for all)
b = -[666.6666667; 16.66666667; 21.66666667; 100; 8.333333333; 8.333333333; 0.3333333333; 0.006; 1.166666667; 0.8; 0.02; 0.0000003; 0];
b_daily = -[2000; 50; 65; 300; 25; 25; 1; 0.018; 3.5; 2.4; 0.06; 0.0000009; 0.3];

lb  = [ 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0]; % each variable needs to be positive
lb_vegetarian = [ 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0]; % each variable needs to be positive
lb_vegan  = [ 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0; 0]; % each variable needs to be positive

ub  = [ 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10]; % no more than 1000 g
ub_vegetarian  = [10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10]; % no more than 1000 g
ub_vegan  = [ 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10; 10]; % no more than 1000 g

options = optimoptions('linprog','Algorithm','dual-simplex');

% use linprog to solve the linear programming problem
[x,fval,exitflag,output,lambda]  = linprog(f,A,b,[],[],lb,ub, options);
[x_vegetarian,fval_vegetarian,exitflag_vegetarian,output_vegetarian,lambda_vegetarian]  = linprog(f_vegetarian,A_vegetarian,b,[],[],lb_vegetarian,ub_vegetarian, options);
[x_vegan,fval_vegan,exitflag_vegan,output_vegan,lambda_vegan]  = linprog(f_vegan,A_vegan,b,[],[],lb_vegan,ub_vegan, options);




